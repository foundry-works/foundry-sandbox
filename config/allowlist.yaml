# Domain allowlist for unified proxy
# Supports exact matches and wildcard patterns (*.domain.com)

version: "1.0"

domains:
  # GitHub
  - github.com
  - "*.github.com"
  - api.github.com
  - raw.githubusercontent.com
  - objects.githubusercontent.com
  - codeload.github.com
  - github-releases.githubusercontent.com
  - gist.github.com
  - gist.githubusercontent.com
  - release-assets.githubusercontent.com
  - codeload.githubusercontent.com
  - uploads.github.com

  # AI Providers
  - api.anthropic.com
  - api.openai.com
  - "*.api.openai.com"
  - chatgpt.com
  - "*.chatgpt.com"
  - generativelanguage.googleapis.com
  - accounts.google.com
  - oauth2.googleapis.com
  - "*.googleapis.com"
  - auth.openai.com
  - api.tavily.com
  - api.perplexity.ai
  - api.z.ai
  - open.bigmodel.cn
  - api.semanticscholar.org

  # Python Package Repository
  - pypi.org
  - "*.pypi.org"
  - files.pythonhosted.org

  # Node.js Package Repository
  - npmjs.org
  - "*.npmjs.org"
  - registry.npmjs.org

  # Ruby Package Repository
  - rubygems.org
  - "*.rubygems.org"

  # Rust Package Repository
  - crates.io
  - "*.crates.io"

  # Go Package Repository
  - pkg.go.dev
  - proxy.golang.org
  - sum.golang.org

  # Java Package Repository
  - maven.apache.org
  - repo1.maven.org

  # PHP Package Repository
  - packagist.org
  - repo.packagist.org

# HTTP endpoint allowlist for fine-grained API access control
# Each endpoint specifies host, allowed methods, and allowed paths
http_endpoints:
  # GitHub API - general read operations
  - host: api.github.com
    methods: [GET, POST, PUT, PATCH, DELETE]
    paths:
      - "/repos/*"
      - "/user/*"
      - "/users/*"
      - "/orgs/*"
      - "/gists/*"
      - "/search/*"
      - "/rate_limit"

  # Anthropic API
  - host: api.anthropic.com
    methods: [GET, POST]
    paths:
      - "/v1/messages"
      - "/v1/complete"
      - "/api/oauth/profile"

  # OpenAI API
  - host: api.openai.com
    methods: [POST, GET]
    paths:
      - "/v1/chat/completions"
      - "/v1/completions"
      - "/v1/models"
      - "/v1/responses"

  # ChatGPT / Codex
  - host: chatgpt.com
    methods: [POST, GET]
    paths:
      - "/backend-api/codex/*"
      - "/backend-api/*"

  # Google AI API
  - host: generativelanguage.googleapis.com
    methods: [POST, GET]
    paths:
      - "/v1beta/models/*"
      - "/v1/models/*"

  # Google Auth (for Gemini login)
  - host: accounts.google.com
    methods: [GET, POST]
    paths:
      - "/o/oauth2/*"
      - "/token"
  - host: oauth2.googleapis.com
    methods: [POST, GET]
    paths:
      - "/token"
      - "/tokeninfo"
      - "/v1/*"

  # Tavily API
  - host: api.tavily.com
    methods: [POST, GET]
    paths:
      - "/search"
      - "/extract"
      - "/*"

  # Perplexity API
  - host: api.perplexity.ai
    methods: [POST, GET]
    paths:
      - "/chat/completions"
      - "/*"

  # Codex OAuth
  - host: auth.openai.com
    methods: [POST]
    paths:
      - "/oauth/token"

  # GitHub uploads
  - host: uploads.github.com
    methods: [POST, PUT, PATCH]
    paths:
      - "/repos/*"

  # Zhipu AI (OpenCode)
  - host: open.bigmodel.cn
    methods: [POST, GET]
    paths:
      - "/*"
  - host: api.z.ai
    methods: [POST, GET]
    paths:
      - "/*"

  # Semantic Scholar
  - host: api.semanticscholar.org
    methods: [GET]
    paths:
      - "/*"
